<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style>
    html, body { height: 100%; margin: 0; }
    body { background: black; display: flex; align-items: center; justify-content: center; }
    canvas { border: 1px solid white; }
  </style>
</head>
<body>
<canvas width="400" height="400" id="game"></canvas>
<script>
var canvas = document.getElementById('game');
var context = canvas.getContext('2d');
var grid = 16;
var count = 0;

var snake =
{
  x : 160,
  y : 160,
 cells : [{x:160 , y:160} , {x:144 , y:160}] ,
};

var apple = {
  x: 320,
  y: 320
};

// draw apple
function drawApple()
{
  context.fillStyle = 'red';
  context.fillRect(apple.x, apple.y, grid-1, grid-1);
}
drawApple();

// draw snake
function drawSnake()
{
  context.fillStyle = 'green';
  for(let i=0 ; i<snake.cells.length ; i++)
    context.fillRect(snake.cells[i].x, snake.cells[i].y, grid-1, grid-1);
}
drawSnake();

function moveSnake( dx , dy)
{
  snake.x += dx ;
  snake.y += dy ;
  snake.cells.unshift({x: snake.x , y: snake.y}) ; // Insert at 0th position
//  snake.cells.pop();  // remove the last element
  drawSnake();
  if((snake.x==apple.x) && (snake.y==apple.y))
  {

    var r1=Math.floor(Math.random()*24+0);
    var r2=Math.floor(Math.random()*24+0);
    apple.x=r1*16;
    apple.y=r2*16;
    snake.cells.push({x:snake.x,y:snake.y});
  }
}

// listen to keyboard events to move the snake
document.addEventListener('keydown', function(e)
{
  let dx , dy ;
  // left arrow key
  if (e.keyCode == 37 )
  {
    dx = -grid;
    dy = 0;
  }
   // up arrow key
  else if (e.keyCode == 38 )
  {
    dy = -grid;
    dx = 0;
  }
   // right arrow key
  else if (e.keyCode == 39 )
  {
    dx = grid;
    dy = 0;
  }
   // down arrow key
  else if (e.keyCode == 40 )
  {
    dy = grid;
    dx = 0;
  }
  if(snake.x<0  || snake.x>384 || snake.y<0 || snake.y>384)
  {
    alert("Game Over!");
  }
  else
  {
    context.clearRect(0, 0, canvas.width,canvas.height);// Clear the Canvas
    moveSnake(dx,dy);
    drawApple();
  }

});
</script>
</body>
</html>
